<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity5"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout}" lang="en">
<head>
    <meta charset="UTF-8">
    <title>Posts</title>
</head>
<body>

<div class="container" layout:fragment="content">

    <th:block th:each="post : ${posts}">
    <div class="row">
        <div class="col s12 m6">
            <div class="card">
                <a th:href="@{'/posts/' + ${post.id}}">
                    <span class="card-title" th:text="${post.title}"></span>
                </a>
                    <p th:text="${post.body}"></p>
                    <p th:text="'created by: ' + ${post.user.username}"></p>
                        <!--<a href="topic.html"-->
                        <!--th:href="@{/topic/${topic.id}}"-->
                        <!--th:if="${topic.name!i.last ? ', ': ', '}">-->
                            <!--<th:block th:each="topic,i : ${post.topics}">-->
                        <!--</a>-->
                            <!--</th:block>-->
                   <p> <th:block th:each="topic,i : ${post.topics}">
                       <th:block th:text="${topic.name.concat(!i.last ? ', ' : ' ')}"></th:block>
                    </th:block>
                   </p>
            </div>
            <span th:text="${post.comments.size()}"></span>
        </div>
    </div>
    </th:block>
</div>

</body>
</html>